{% extends 'chat/base.html' %}

{% block title %}Chat Room{% endblock %}

{% load static %}

{% block content %}

 

 <div class="bg-gradient-to-r from-amber-300 via-amber-200 to-amber-300 flex flex-col justify-center items-center h-screen"
 style="height: calc(100vh - 62px);">
    <div class="max-w-7xl w-full mx-auto bg-white p-6 rounded-lg shadow-lg font-sans text-gray-800 overflow-y-auto max-h-screen" id="messageContainer">
    </div>

    <div class="max-w-7xl w-full mx-auto mt-4 bg-white p-4 rounded-lg shadow-lg font-sans text-gray-800">
        <form action="." method="post" id="message-form" class="flex items-center">
            {% csrf_token %}
            <input type="text" name="message" id="message-box" class="flex-grow px-4 py-4 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">

            <button type="submit" id="send-button" class="ml-2 bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-8 rounded focus:outline-none focus:shadow-outline">
                Send
            </button>
        </form>
    </div>

</div>


<script>
  // Wait for the DOM to load
  document.addEventListener('DOMContentLoaded', function () {
      // Scroll to the bottom of the message container
      const messageContainer = document.getElementById('messageContainer');
      messageContainer.scrollTop = messageContainer.scrollHeight;
      
      window.scrollTo(0, document.body.scrollHeight);
    });
    
    const user = "{{user}}";
    
    const serializedSharedKey = "{{shared_key}}";
    // Deserialize the shared key from base64
    let sharedKey = Uint8Array.from(atob(serializedSharedKey), c => c.charCodeAt(0));



</script>

<script src="{% static 'js/encrypt.js' %}"></script>
<script src="{% static 'js/messages.js' %}"></script>
{% endblock %}

 
 
 
 
 
 
 
 
 
 
 
 
 